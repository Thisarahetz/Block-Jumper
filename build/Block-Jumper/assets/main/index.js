System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){var e,r,n,i,a,s,o,l,u,h,c,p,f,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,o=t.Prefab,l=t.CCInteger,u=t.Node,h=t.Label,c=t.Vec3,p=t.instantiate,f=t.Component},function(t){d=t.PlayerController,y=t.BLOCK_SIZE}],execute:function(){var _,b,N,g,S,T,C,G,I,L,E,P,m;a._RF.push({},"a9311EWDJtDUJ1QqATPs7W6","GameManager",void 0);var v=s.ccclass,B=s.property,M=function(t){return t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE",t}(M||{}),O=function(t){return t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END",t}(O||{});t("GameManager",(_=v("GameManager"),b=B({type:o}),N=B({type:l}),g=B({type:u}),S=B({type:d}),T=B({type:h}),_((I=e((G=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(e,"boxPrefab",I,i(e)),n(e,"roadLength",L,i(e)),e._road=[],n(e,"startMenu",E,i(e)),n(e,"playerCtrl",P,i(e)),n(e,"stepsLabel",m,i(e)),e}r(e,t);var a=e.prototype;return a.start=function(){var t;this.setCurState(O.GS_INIT),null==(t=this.playerCtrl)||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},a.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(c.ZERO),this.playerCtrl.reset())},a.setCurState=function(t){var e=this;switch(t){case O.GS_INIT:this.init();break;case O.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel&&(this.stepsLabel.string="0"),setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case O.GS_END:}},a.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(M.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===M.BT_NONE?this._road.push(M.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e*y,0,0))}},a.spawnBlockByType=function(t){if(!this.boxPrefab)return null;var e=null;switch(t){case M.BT_STONE:e=p(this.boxPrefab)}return e},a.onStartButtonClicked=function(){this.setCurState(O.GS_PLAYING)},a.checkResult=function(t){t<this.roadLength?this._road[t]==M.BT_NONE&&this.setCurState(O.GS_INIT):this.setCurState(O.GS_INIT)},a.onPlayerJumpEnd=function(t){console.log("onPlayerJumpEnd",t),this.stepsLabel&&(this.stepsLabel.string=""+(t>=this.roadLength?this.roadLength:t)),this.checkResult(t)},e}(f)).prototype,"boxPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(G.prototype,"roadLength",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),E=e(G.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(G.prototype,"playerCtrl",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(G.prototype,"stepsLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=G))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameManager.ts","./PlayerController.ts"],(function(){return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,s,u,r,h,p,c,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,u=t._decorator,r=t.Animation,h=t.Node,p=t.input,c=t.Input,a=t.Vec3,l=t.Component}],execute:function(){var m,_,T,d,y,f,S,P,g;s._RF.push({},"2eb41nH0QZC4bKdVQUVmgEB","PlayerController",void 0);var v=u.ccclass,B=u.property,E=t("BLOCK_SIZE",40);t("PlayerController",(m=v("PlayerController"),_=B(r),T=B({type:h}),d=B({type:h}),m((S=e((f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return e=t.call.apply(t,[this].concat(s))||this,o(e,"BodyAnim",S,n(e)),o(e,"leftTouch",P,n(e)),o(e,"rightTouch",g,n(e)),e._startJump=!1,e._jumpStep=0,e._curJumpTime=0,e._jumpTime=.1,e._curJumpSpeed=0,e._curPos=new a,e._deltaPos=new a(0,0,0),e._targetPos=new a,e._curMoveIndex=0,e}i(e,t);var s=e.prototype;return s.start=function(){p.on(c.EventType.MOUSE_UP,this.onMouseUp,this)},s.setInputActive=function(t){t?(p.on(c.EventType.MOUSE_UP,this.onMouseUp,this),this.leftTouch.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.rightTouch.on(c.EventType.TOUCH_START,this.onTouchStart,this)):(p.off(c.EventType.MOUSE_UP,this.onMouseUp,this),this.leftTouch.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.rightTouch.off(c.EventType.TOUCH_START,this.onTouchStart,this))},s.onTouchStart=function(t){var e=t.target;"LeftTouch"==(null==e?void 0:e.name)?this.jumpByStep(1):this.jumpByStep(2)},s.reset=function(){this._curMoveIndex=0,this.node.getPosition(this._curPos),this._targetPos.set(0,0,0)},s.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},s.jumpByStep=function(t){if(!this._startJump){this._startJump=!0,this._jumpStep=t,this._curJumpTime=0;var e=1==t?"oneStep":"twoStep",i=this.BodyAnim.getState(e);this._jumpTime=i.duration,this._curJumpSpeed=this._jumpStep*E/this._jumpTime,this.node.getPosition(this._curPos),a.add(this._targetPos,this._curPos,new a(this._jumpStep*E,0,0)),this.BodyAnim&&(1===t?this.BodyAnim.play("oneStep"):2===t&&this.BodyAnim.play("twoStep")),this._curMoveIndex+=t}},s.onOnceJumpEnd=function(){this.node.emit("JumpEnd",this._curMoveIndex)},s.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,a.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},e}(l)).prototype,"BodyAnim",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(f.prototype,"leftTouch",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(f.prototype,"rightTouch",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});